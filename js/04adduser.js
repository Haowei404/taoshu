"use strict";$(function(){var e=function(e){return/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/.test(e)},t=function(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)},a=function(e){return/^\w{6,16}$/.test(e)};$("#required").change(function(){e($("#required").val().trim())?new Promise(function(t){$.ajax({url:"../api/user.php",type:"get",data:{mes:"checkusername",username:$("#required").val().trim()},success:function(e){t(e)}})}).then(function(e){console.log(e),"yes"==e?($("#required").next().css("color","red").html("用户名已存在"),$("#required").data("isok","false")):($("#required").next().css("color","#58bc58").html("可以添加此用户名"),$("#required").data("isok","true"))}):($("#required").next().css("color","red").html("输入不规范必须字母开头，允许5-16字节，允许字母数字下划线"),$("#required").data("isok","false"))}),$("#email").change(function(){t($("#email").val().trim())?new Promise(function(t){$.ajax({url:"../api/user.php",type:"get",data:{mes:"checkemail",email:$("#email").val().trim()},success:function(e){t(e)}})}).then(function(e){"yes"==e?($("#email").next().css("color","red").html("该邮箱已存在"),$("#email").data("isok","false")):($("#email").next().css("color","#58bc58").html("该邮箱可以注册"),$("#email").data("isok","true"))}):($("#email").next().css("color","red").html("请输入正确的邮箱格式"),$("#email").data("isok","false"))}),$("#date").change(function(){a($("#date").val().trim().trim())?($("#date").next().css("color","#58bc58").html("密码符合要求"),$("#date").data("isok","true")):($("#date").next().css("color","red").html("密码不符合要求,必须在6-16字符内"),$("#date").data("isok","false"))}),$(".btn-success").click(function(){var a=0;($(".control-group input").each(function(e,t){"true"==$(".control-group input").eq(e).data("isok")&&a++}),a==$(".control-group input").length)?confirm("你确定要添加新用户吗")&&$.ajax({type:"get",url:"../api/admin.php",data:{username:$("#required").val(),email:$("#email").val(),password:$("#date").val(),mes:"add"},success:function(e){"yes"==e&&(alert("添加成功"),$("#required").val("").next().css("color","#666").html("字母开头，允许5-16字节，允许字母数字下划线"),$("#email").val("").next().css("color","#666").html("请填写您常用邮箱地址"),$("#date").val("").next().css("color","#666").html("密码在6-16字符内"))}}):alert("请输入正确信息")})});